{
  "version": "2.0.0",
  "tasks": [
    {
      "label": "Preview site (Python server)",
      "type": "shell",
      "command": "python3 serve.py",
      "args": [],
      "options": { "cwd": "${workspaceFolder}", "env": {} },
      "isBackground": true,
      "problemMatcher": [],
      "presentation": { "reveal": "silent", "panel": "dedicated" },
      "runOptions": { "instanceLimit": 1 }
    },
    {
      "label": "Run Farm-Fresh-Meats (full app)",
      "type": "shell",
      "command": "/Users/mac/.cursor/scripts/with-node.sh npm run dev",
      "options": { "cwd": "${workspaceFolder}", "env": { "ROOT": "Farm-Fresh-Meats" } },
      "isBackground": true,
      "problemMatcher": [],
      "presentation": { "reveal": "always", "panel": "dedicated" },
      "runOptions": { "instanceLimit": 1 }
    },
    {
      "label": "Start Farm-Fresh-Meats (production)",
      "type": "shell",
      "command": "npm run build && npm start",
      "options": { "cwd": "${workspaceFolder}/Farm-Fresh-Meats" },
      "isBackground": true,
      "problemMatcher": [],
      "presentation": { "reveal": "always", "panel": "dedicated" },
      "runOptions": { "instanceLimit": 1 }
    },
    {
      "label": "Start Farm-Fresh-Meats (dev)",
      "type": "shell",
      "command": "npm run dev",
      "options": { "cwd": "${workspaceFolder}/Farm-Fresh-Meats" },
      "isBackground": true,
      "problemMatcher": [],
      "presentation": { "reveal": "always", "panel": "dedicated" },
      "runOptions": { "instanceLimit": 1 }
    },
    {
      "label": "Open Farm-Fresh-Meats in Simple Browser",
      "type": "shell",
      "command": "echo ${input:openSimpleBrowser}",
      "problemMatcher": [],
      "presentation": { "reveal": "never" },
      "inputs": [
        {
          "id": "openSimpleBrowser",
          "type": "command",
          "command": "simpleBrowser.api.open",
          "args": ["http://127.0.0.1:5001?autorefresh=5&_b=5", {"viewColumn": 2}]
        }
      ]
    },
    {
      "label": "Run Farm-Fresh-Meats in Simple Browser",
      "dependsOrder": "sequence",
      "dependsOn": [
        "Start Farm-Fresh-Meats (production)",
        "Open Farm-Fresh-Meats in Simple Browser"
      ],
      "problemMatcher": []
    },
    {
      "label": "Run Farm-Fresh-Meats (dev) in Simple Browser",
      "dependsOrder": "sequence",
      "dependsOn": [
        "Start Farm-Fresh-Meats (dev)",
        "Open Farm-Fresh-Meats in Simple Browser"
      ],
      "problemMatcher": []
    },
    {
      "label": "Open Farm-Fresh-Meats in system browser",
      "type": "shell",
      "command": "sleep 4 && open \"http://127.0.0.1:5001?autorefresh=5\"",
      "options": { "cwd": "${workspaceFolder}" },
      "problemMatcher": [],
      "presentation": { "reveal": "never" }
    },
    {
      "label": "Run Farm-Fresh-Meats (build, serve, open all)",
      "dependsOrder": "sequence",
      "dependsOn": [
        "Start Farm-Fresh-Meats (production)",
        "Open Farm-Fresh-Meats in Simple Browser",
        "Open Farm-Fresh-Meats in system browser"
      ],
      "problemMatcher": [],
      "group": { "kind": "build", "isDefault": true },
      "runOptions": { "runOn": "folderOpen" }
    },
    {
      "label": "Deploy to live (merge dev → main, push)",
      "type": "shell",
      "command": "git checkout main && git pull origin main && git merge dev -m 'Merge dev: deploy from Cursor' && git push origin main",
      "options": { "cwd": "${workspaceFolder}" },
      "problemMatcher": [],
      "presentation": { "reveal": "always", "panel": "shared" },
      "group": "none"
    },
    {
      "label": "Build Farm-Fresh-Meats",
      "type": "shell",
      "command": "npm run build",
      "options": { "cwd": "${workspaceFolder}/Farm-Fresh-Meats" },
      "problemMatcher": [],
      "presentation": { "reveal": "always", "panel": "shared" }
    },
    {
      "label": "Restart Farm-Fresh-Meats (dev)",
      "type": "shell",
      "command": "npm run restart:dev",
      "options": { "cwd": "${workspaceFolder}/Farm-Fresh-Meats" },
      "isBackground": true,
      "problemMatcher": [],
      "presentation": { "reveal": "always", "panel": "dedicated" },
      "runOptions": { "instanceLimit": 1 }
    },
    {
      "label": "Build & Restart (local)",
      "dependsOrder": "sequence",
      "dependsOn": ["Build Farm-Fresh-Meats", "Restart Farm-Fresh-Meats (dev)"],
      "problemMatcher": [],
      "group": "build",
      "presentation": { "reveal": "always" }
    },
    {
      "label": "Build, Deploy & Restart",
      "dependsOrder": "sequence",
      "dependsOn": ["Build Farm-Fresh-Meats", "Deploy to live (merge dev → main, push)", "Restart Farm-Fresh-Meats (dev)"],
      "problemMatcher": [],
      "group": "build",
      "presentation": { "reveal": "always" }
    }
  ]
}
