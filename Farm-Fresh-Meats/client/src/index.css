@import "tailwindcss";
@import "tw-animate-css";

@custom-variant dark (&:is(.dark *));

@theme inline {
  --radius-sm: calc(var(--radius) - 4px);
  --radius-md: calc(var(--radius) - 2px);
  --radius-lg: var(--radius);
  --radius-xl: calc(var(--radius) + 4px);

  --color-background: hsl(var(--background));
  --color-foreground: hsl(var(--foreground));
  --color-card: hsl(var(--card));
  --color-card-foreground: hsl(var(--card-foreground));
  --color-popover: hsl(var(--popover));
  --color-popover-foreground: hsl(var(--popover-foreground));
  --color-primary: hsl(var(--primary));
  --color-primary-foreground: hsl(var(--primary-foreground));
  --color-secondary: hsl(var(--secondary));
  --color-secondary-foreground: hsl(var(--secondary-foreground));
  --color-muted: hsl(var(--muted));
  --color-muted-foreground: hsl(var(--muted-foreground));
  --color-accent: hsl(var(--accent));
  --color-accent-foreground: hsl(var(--accent-foreground));
  --color-destructive: hsl(var(--destructive));
  --color-destructive-foreground: hsl(var(--destructive-foreground));
  --color-border: hsl(var(--border));
  --color-primary-border: hsl(var(--primary-border));
  --color-accent-border: hsl(var(--accent-border));
  --color-card-border: hsl(var(--card-border));
  --color-input: hsl(var(--input));
  --color-ring: hsl(var(--ring));
  --color-chart-1: hsl(var(--chart-1));
  --color-chart-2: hsl(var(--chart-2));
  --color-chart-3: hsl(var(--chart-3));
  --color-chart-4: hsl(var(--chart-4));
  --color-chart-5: hsl(var(--chart-5));
  --color-sidebar: hsl(var(--sidebar));
  --color-sidebar-foreground: hsl(var(--sidebar-foreground));
  --color-sidebar-primary: hsl(var(--sidebar-primary));
  --color-sidebar-primary-foreground: hsl(var(--sidebar-primary-foreground));
  --color-sidebar-accent: hsl(var(--sidebar-accent));
  --color-sidebar-accent-foreground: hsl(var(--sidebar-accent-foreground));
  --color-sidebar-border: hsl(var(--sidebar-border));
  --color-sidebar-ring: hsl(var(--sidebar-ring));

  --font-sans: "DM Sans", sans-serif;
  --font-display: "Fraunces", serif;
  --font-mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
}

:root {
  --button-outline: rgba(0, 0, 0, 0.1);
  --badge-outline: rgba(0, 0, 0, 0.05);
  --opaque-button-border-intensity: -8;
  --elevate-1: rgba(0, 0, 0, 0.03);
  --elevate-2: rgba(0, 0, 0, 0.08);

  --background: 38 35% 97%;
  --foreground: 168 18% 12%;

  --card: 0 0% 100%;
  --card-foreground: 168 18% 12%;
  --card-border: 30 18% 88%;

  --popover: 0 0% 100%;
  --popover-foreground: 168 18% 12%;
  --popover-border: 30 18% 88%;

  --primary: 156 44% 22%;
  --primary-foreground: 40 30% 98%;

  --secondary: 28 30% 92%;
  --secondary-foreground: 168 18% 12%;

  --muted: 30 24% 92%;
  --muted-foreground: 168 10% 36%;

  --accent: 44 70% 52%;
  --accent-foreground: 20 25% 10%;

  --destructive: 0 74% 52%;
  --destructive-foreground: 0 0% 100%;

  --border: 30 18% 84%;
  --input: 30 18% 84%;
  --ring: 156 44% 22%;

  --chart-1: 156 44% 22%;
  --chart-2: 44 70% 52%;
  --chart-3: 26 46% 48%;
  --chart-4: 168 22% 24%;
  --chart-5: 210 40% 44%;

  --sidebar: 0 0% 100%;
  --sidebar-foreground: 168 18% 12%;
  --sidebar-border: 30 18% 88%;
  --sidebar-primary: 156 44% 22%;
  --sidebar-primary-foreground: 40 30% 98%;
  --sidebar-accent: 30 24% 92%;
  --sidebar-accent-foreground: 168 18% 12%;
  --sidebar-ring: 156 44% 22%;

  --radius: 1.05rem;

  --enkana-card-accent: 156 44% 22%;
  --enkana-card-accent-2: 44 70% 52%;

  /* Enkana design system (Wave-inspired) */
  --enkana-cream: #f5f0e8;
  --enkana-forest: #1a3a2a;
  --enkana-amber: #e9a82a;
  --enkana-forest-light: #2a4a3a;
  --enkana-green-medium: #4a7c5e;
  --enkana-green-dark: #2d6a4f;

  /* Typography scale — sizes */
  --text-hero: 42px;
  --text-page: 28px;
  --text-section: 18px;
  --text-metric: 32px;
  --text-body-lg: 16px;
  --text-body: 14px;
  --text-body-sm: 13px;
  --text-label: 12px;
  --text-xs: 11px;

  /* Typography scale — weights */
  --weight-regular: 400;
  --weight-medium: 500;
  --weight-semibold: 600;
  --weight-bold: 700;

  /* Typography scale — text colors */
  --color-text-primary: #111827;
  --color-text-heading: #1a3a2a;
  --color-text-muted: #6b7280;
  --color-text-subtle: #9ca3af;
  --color-text-inverse: #ffffff;
  --color-text-cream: #f5f0e8;
  --color-text-amber: #e9a82a;
  --color-text-error: #dc2626;
  --color-text-nav: #374151;
}

.dark {
  --button-outline: rgba(255, 255, 255, 0.1);
  --badge-outline: rgba(255, 255, 255, 0.05);
  --opaque-button-border-intensity: 9;
  --elevate-1: rgba(255, 255, 255, 0.04);
  --elevate-2: rgba(255, 255, 255, 0.09);

  --background: 168 18% 8%;
  --foreground: 40 30% 98%;

  --card: 168 18% 10%;
  --card-foreground: 40 30% 98%;
  --card-border: 168 14% 16%;

  --popover: 168 18% 10%;
  --popover-foreground: 40 30% 98%;
  --popover-border: 168 14% 16%;

  --primary: 44 70% 52%;
  --primary-foreground: 20 25% 10%;

  --secondary: 168 14% 14%;
  --secondary-foreground: 40 30% 98%;

  --muted: 168 14% 14%;
  --muted-foreground: 168 10% 72%;

  --accent: 156 40% 28%;
  --accent-foreground: 40 30% 98%;

  --destructive: 0 74% 52%;
  --destructive-foreground: 0 0% 100%;

  --border: 168 14% 16%;
  --input: 168 14% 16%;
  --ring: 44 70% 52%;

  --chart-1: 44 70% 52%;
  --chart-2: 156 40% 28%;
  --chart-3: 26 46% 48%;
  --chart-4: 168 22% 24%;
  --chart-5: 210 40% 44%;

  --enkana-card-accent: 44 70% 52%;
  --enkana-card-accent-2: 156 40% 28%;
}

@layer base {
  * {
    @apply border-border;
  }

  html {
    font-family: var(--font-sans);
  }

  body {
    @apply antialiased bg-background;
    font-size: var(--text-body);
    font-weight: var(--weight-regular);
    color: var(--color-text-primary);
  }

  /* Form input and placeholder use typography scale */
  input, textarea, [role="combobox"] {
    font-family: var(--font-sans);
    font-size: var(--text-body);
    font-weight: var(--weight-regular);
    color: var(--color-text-primary);
  }

  input::placeholder,
  textarea::placeholder {
    color: var(--color-text-subtle);
  }

  /* Label when used with form-label class is set via utility */
  label:not([class*="form-label"]) {
    font-family: var(--font-sans);
    font-size: var(--text-body-sm);
    font-weight: var(--weight-medium);
    color: var(--color-text-nav);
  }
}

@layer utilities {
  .font-display {
    font-family: var(--font-display);
  }

  .text-balance {
    text-wrap: balance;
  }

  /* ——— DISPLAY / HERO ——— */
  .text-hero {
    font-family: var(--font-display);
    font-size: var(--text-hero);
    font-weight: var(--weight-bold);
    color: var(--color-text-cream);
  }

  /* ——— PAGE LEVEL ——— */
  .page-title {
    font-family: var(--font-display);
    font-size: var(--text-page);
    font-weight: var(--weight-bold);
    color: var(--color-text-heading);
  }

  .page-subtitle {
    font-family: var(--font-sans);
    font-size: var(--text-body);
    font-weight: var(--weight-regular);
    color: var(--color-text-muted);
    margin-top: 0.25rem;
  }

  /* ——— SECTION LEVEL ——— */
  .section-label {
    font-family: var(--font-sans);
    font-size: var(--text-xs);
    font-weight: var(--weight-semibold);
    color: var(--color-text-muted);
    text-transform: uppercase;
    letter-spacing: 0.08em;
  }

  .section-heading {
    font-family: var(--font-display);
    font-size: var(--text-section);
    font-weight: var(--weight-semibold);
    color: var(--color-text-heading);
  }

  /* ——— METRIC CARDS ——— */
  .metric-value {
    font-family: var(--font-display);
    font-size: var(--text-metric);
    font-weight: var(--weight-bold);
    color: var(--color-text-heading);
    line-height: 1.25;
  }

  .metric-label {
    font-family: var(--font-sans);
    font-size: var(--text-label);
    font-weight: var(--weight-regular);
    color: var(--color-text-muted);
  }

  .metric-card-title {
    font-family: var(--font-sans);
    font-size: var(--text-xs);
    font-weight: var(--weight-semibold);
    color: var(--color-text-muted);
    text-transform: uppercase;
    letter-spacing: 0.06em;
  }

  /* ——— TABLES ——— */
  .table-header {
    font-family: var(--font-sans);
    font-size: var(--text-xs);
    font-weight: var(--weight-semibold);
    color: var(--color-text-muted);
    text-transform: uppercase;
    letter-spacing: 0.06em;
  }

  .table-cell-primary {
    font-family: var(--font-sans);
    font-size: var(--text-body);
    font-weight: var(--weight-regular);
    color: var(--color-text-primary);
  }

  .table-cell-secondary {
    font-family: var(--font-sans);
    font-size: var(--text-body-sm);
    font-weight: var(--weight-regular);
    color: var(--color-text-muted);
  }

  .table-footer {
    font-family: var(--font-sans);
    font-size: var(--text-body);
    font-weight: var(--weight-semibold);
    color: var(--color-text-heading);
  }

  .table-footer-amount {
    font-family: var(--font-display);
    font-size: var(--text-body-lg);
    font-weight: var(--weight-bold);
    color: var(--color-text-heading);
  }

  /* ——— FORMS ——— */
  .form-section-title {
    font-family: var(--font-display);
    font-size: var(--text-section);
    font-weight: var(--weight-semibold);
    color: var(--color-text-heading);
  }

  .form-label {
    font-family: var(--font-sans);
    font-size: var(--text-body-sm);
    font-weight: var(--weight-medium);
    color: var(--color-text-nav);
  }

  .form-helper {
    font-family: var(--font-sans);
    font-size: var(--text-label);
    font-weight: var(--weight-regular);
    color: var(--color-text-muted);
  }

  .form-error {
    font-family: var(--font-sans);
    font-size: var(--text-label);
    font-weight: var(--weight-regular);
    color: var(--color-text-error);
  }

  /* ——— BUTTONS & LINKS ——— */
  .btn-primary-text {
    font-family: var(--font-sans);
    font-size: var(--text-body);
    font-weight: var(--weight-medium);
    color: var(--color-text-inverse);
  }

  .btn-secondary-text {
    font-family: var(--font-sans);
    font-size: var(--text-body);
    font-weight: var(--weight-medium);
    color: var(--color-text-heading);
  }

  .text-link-amber {
    font-family: var(--font-sans);
    font-size: var(--text-body-sm);
    font-weight: var(--weight-regular);
    color: var(--color-text-amber);
  }

  .text-link-amber:hover {
    text-decoration: underline;
  }

  /* ——— NAVIGATION ——— */
  .nav-brand {
    font-family: var(--font-display);
    font-size: var(--text-body-lg);
    font-weight: var(--weight-semibold);
    color: var(--color-text-heading);
  }

  .nav-brand-subtitle {
    font-family: var(--font-sans);
    font-size: var(--text-xs);
    font-weight: var(--weight-regular);
    color: var(--color-text-muted);
  }

  .nav-item {
    font-family: var(--font-sans);
    font-size: var(--text-body-sm);
    font-weight: var(--weight-medium);
    color: var(--color-text-nav);
  }

  .nav-item-sub {
    font-family: var(--font-sans);
    font-size: var(--text-body-sm);
    font-weight: var(--weight-regular);
    color: var(--color-text-muted);
  }

  .nav-create-btn {
    font-family: var(--font-sans);
    font-size: var(--text-body-sm);
    font-weight: var(--weight-medium);
    color: var(--color-text-inverse);
  }

  /* ——— STATUS BADGES ——— */
  .badge-text {
    font-family: var(--font-sans);
    font-size: var(--text-xs);
    font-weight: var(--weight-semibold);
    text-transform: capitalize;
  }

  /* ——— DROPDOWN / SELECT ——— */
  .select-text {
    font-family: var(--font-sans);
    font-size: var(--text-body-sm);
    font-weight: var(--weight-regular);
    color: var(--color-text-nav);
  }

  /* ——— TABS ——— */
  .tab-active {
    font-family: var(--font-sans);
    font-size: var(--text-body);
    font-weight: var(--weight-semibold);
    color: var(--color-text-heading);
  }

  .tab-inactive {
    font-family: var(--font-sans);
    font-size: var(--text-body);
    font-weight: var(--weight-regular);
    color: var(--color-text-muted);
  }

  /* ——— ALERTS & BANNERS ——— */
  .alert-banner-main {
    font-family: var(--font-sans);
    font-size: var(--text-body);
    font-weight: var(--weight-medium);
    color: var(--color-text-heading);
  }

  .alert-banner-warning {
    font-family: var(--font-sans);
    font-size: var(--text-body-sm);
    font-weight: var(--weight-semibold);
    color: var(--color-text-amber);
  }

  /* ——— CHARTS ——— */
  .chart-axis-label {
    font-family: var(--font-sans);
    font-size: var(--text-xs);
    font-weight: var(--weight-regular);
    color: var(--color-text-muted);
  }

  .chart-legend-text {
    font-family: var(--font-sans);
    font-size: var(--text-label);
    font-weight: var(--weight-regular);
    color: var(--color-text-nav);
  }

  .chart-data-label {
    font-family: var(--font-sans);
    font-size: var(--text-xs);
    font-weight: var(--weight-medium);
    color: var(--color-text-heading);
  }

  /* ——— FOOTER ——— */
  .footer-build {
    font-family: var(--font-mono);
    font-size: var(--text-xs);
    font-weight: var(--weight-regular);
    color: var(--color-text-subtle);
  }

  /* ——— EMPTY STATE ——— */
  .empty-state-title {
    font-family: var(--font-sans);
    font-size: var(--text-body);
    font-weight: var(--weight-semibold);
    color: var(--color-text-primary);
  }

  .empty-state-body {
    font-family: var(--font-sans);
    font-size: var(--text-body);
    font-weight: var(--weight-regular);
    color: var(--color-text-muted);
  }

  .enkana-bg {
    background-image:
      radial-gradient(1200px 600px at 10% 10%, hsl(var(--accent) / 0.28), transparent 60%),
      radial-gradient(900px 520px at 90% 0%, hsl(var(--primary) / 0.26), transparent 55%),
      radial-gradient(900px 600px at 30% 100%, hsl(var(--chart-3) / 0.20), transparent 60%),
      linear-gradient(to bottom, hsl(var(--background)), hsl(var(--background)));
  }

  .grain-overlay {
    position: relative;
  }

  .grain-overlay::before {
    content: "";
    position: absolute;
    inset: 0;
    pointer-events: none;
    background-image: radial-gradient(circle at 20% 30%, rgba(0,0,0,.035) 0.6px, transparent 0.7px),
      radial-gradient(circle at 80% 40%, rgba(0,0,0,.028) 0.6px, transparent 0.7px),
      radial-gradient(circle at 50% 70%, rgba(0,0,0,.03) 0.6px, transparent 0.7px);
    background-size: 22px 22px, 28px 28px, 26px 26px;
    opacity: 0.55;
    mix-blend-mode: multiply;
    border-radius: inherit;
  }

  .glass {
    background: hsl(var(--card) / 0.78);
    backdrop-filter: blur(10px);
    border: 1px solid hsl(var(--card-border) / 0.8);
  }

  .enkana-card {
    position: relative;
    overflow: hidden;
  }

  .enkana-card::after {
    content: "";
    position: absolute;
    inset: -1px;
    pointer-events: none;
    border-radius: inherit;
    opacity: 0.92;
    background:
      radial-gradient(540px 260px at 10% 10%, hsl(var(--enkana-card-accent) / 0.30), transparent 62%),
      radial-gradient(560px 260px at 92% 0%, hsl(var(--enkana-card-accent-2) / 0.22), transparent 58%),
      linear-gradient(180deg, hsl(var(--card) / 0.35), transparent 55%);
    mix-blend-mode: multiply;
  }

  .enkana-card > * {
    position: relative;
    z-index: 1;
  }

  .ring-soft {
    box-shadow:
      0 0 0 1px hsl(var(--border)),
      0 18px 40px -24px hsl(var(--foreground) / 0.35);
  }

  .enkana-section-green {
    background:
      linear-gradient(180deg, hsl(var(--primary) / 0.06) 0%, transparent 100%);
  }

  .enkana-section-gold {
    background:
      linear-gradient(180deg, hsl(var(--accent) / 0.08) 0%, transparent 100%);
  }

  .enkana-divider {
    height: 3px;
    background: linear-gradient(90deg, transparent, hsl(var(--primary) / 0.35) 20%, hsl(var(--accent) / 0.5) 50%, hsl(var(--primary) / 0.35) 80%, transparent);
  }

  .enkana-btn-glow {
    box-shadow:
      0 4px 14px -3px hsl(var(--primary) / 0.4),
      0 1px 3px hsl(var(--primary) / 0.15);
    transition: box-shadow 0.2s ease, transform 0.15s ease;
  }

  .enkana-btn-glow:hover {
    box-shadow:
      0 6px 20px -3px hsl(var(--primary) / 0.5),
      0 2px 6px hsl(var(--primary) / 0.2);
    transform: translateY(-1px);
  }

  .enkana-card-hover {
    transition: transform 0.2s ease, box-shadow 0.2s ease;
  }

  .enkana-card-hover:hover {
    transform: translateY(-3px);
    box-shadow:
      0 0 0 1px hsl(var(--primary) / 0.15),
      0 20px 44px -20px hsl(var(--foreground) / 0.25);
  }

  .enkana-hero-overlay {
    background:
      linear-gradient(135deg, hsl(var(--primary) / 0.12) 0%, transparent 50%),
      linear-gradient(225deg, hsl(var(--accent) / 0.10) 0%, transparent 50%);
  }

  .enkana-footer {
    background:
      linear-gradient(180deg, hsl(var(--primary) / 0.04) 0%, hsl(var(--primary) / 0.08) 100%);
  }

  .enkana-gradient-text {
    background: linear-gradient(135deg, hsl(var(--primary)) 0%, hsl(156 44% 32%) 50%, hsl(var(--accent)) 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }

  .enkana-step-number {
    background: linear-gradient(135deg, hsl(var(--primary)) 0%, hsl(156 44% 30%) 100%);
    color: hsl(40 30% 98%);
    font-weight: 700;
    box-shadow: 0 3px 10px -2px hsl(var(--primary) / 0.4);
  }

  .enkana-icon-box {
    background: linear-gradient(135deg, hsl(var(--primary) / 0.12) 0%, hsl(var(--accent) / 0.08) 100%);
    border: 1px solid hsl(var(--primary) / 0.12);
  }

  .enkana-pill {
    background: linear-gradient(135deg, hsl(var(--primary) / 0.08), hsl(var(--accent) / 0.10));
    border: 1px solid hsl(var(--primary) / 0.18);
    backdrop-filter: blur(8px);
  }
}
